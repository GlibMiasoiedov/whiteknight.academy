<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/logo.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>White Knight Analytics — Chess Performance Reports & Coaching</title>
  <meta name="description"
    content="Turn your chess games into a clear improvement plan. Connect Chess.com or Lichess for AI-powered analysis, weakness detection, and coach matching.">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://analytics.whiteknight.academy/">
  <meta property="og:title" content="White Knight Analytics — Chess Performance Reports">
  <meta property="og:description"
    content="Turn your chess games into a clear improvement plan. AI-powered analysis, weakness detection, and coach matching.">
  <meta property="og:image" content="https://analytics.whiteknight.academy/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="White Knight Analytics — Chess Performance Reports">
  <meta name="twitter:description" content="Turn your chess games into a clear improvement plan.">
  <meta name="twitter:image" content="https://analytics.whiteknight.academy/og-image.png">

  <!-- Theme Color -->
  <meta name="theme-color" content="#080C14">

  <!-- Resource Hints -->
  <link rel="dns-prefetch" href="https://js.stripe.com">
  <link rel="dns-prefetch" href="https://api.stripe.com">

  <style>
    /* TІЛЬКИ ЦЕ — без будь-якого глобального reset */
    html,
    body {
      background-color: #080C14;
    }

    .app-loader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #080C14;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      z-index: 9999;
      transition: opacity 0.3s ease;
    }

    .app-loader.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .app-loader__logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: #a855f7;
      letter-spacing: -0.02em;
    }

    .app-loader__spinner {
      width: 32px;
      height: 32px;
      border: 3px solid rgba(168, 85, 247, 0.2);
      border-top-color: #a855f7;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <div class="app-loader" id="app-loader">
    <div class="app-loader__logo">Knight Analytics</div>
    <div class="app-loader__spinner"></div>
  </div>

  <div id="root"></div>
  <script>
    // EMERGENCY SERVICE WORKER KILLER
    // This runs before the main app to ensure no stale SW intercepts requests
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(function (registrations) {
        for (let registration of registrations) {
          console.warn('Unregistering Service Worker:', registration);
          registration.unregister();
        }
        if (registrations.length > 0) {
          console.warn('Reloading to apply SW removal...');
          window.location.reload();
        }
      });
    }
  </script>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>